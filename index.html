<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Data Interaction Course Materials</title>
<meta name="generator" content="Org mode">
<meta name="author" content="Jens Östlund, Fabian Miiro">
<meta name="description" content="Pseudo-code for a schema definition"
>
<link rel="stylesheet" href="assets/base.css" />
<link rel="stylesheet" href="assets/htmlize.css" />
<link rel="stylesheet" href="assets/style-overrides.css" />
</head>
<body>
<div id="content">
<header>
<h1 class="title">Data Interaction Course Materials</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#setting-up-your-environment">1. Setting up your Environment</a>
<ul>
<li><a href="#setting-up-mongodb">1.1. Setting up MongoDB</a>
<ul>
<li><a href="#installing-and-running-mongodb-on-macos">1.1.1. Installing and running MongoDB on MacOS</a></li>
<li><a href="#installing-and-running-mongodb-on-windows">1.1.2. Installing and running MongoDB on Windows</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#introduction-to-nodejs">2. Introduction to node.js</a>
<ul>
<li><a href="#nodejs-vs-the-browser">2.1. node.js vs the Browser</a></li>
<li><a href="#hello-node">2.2. Hello Node</a>
<ul>
<li><a href="#using-built-in-modules">2.2.1. Using built-in modules</a></li>
<li><a href="#writing-our-own-module">2.2.2. Writing our own module</a></li>
<li><a href="#messing-around-with-the-global-scope">2.2.3. Messing around with the global scope</a></li>
<li><a href="#reading-environment-variables">2.2.4. Reading environment variables</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#our-first-api">3. Our First API</a>
<ul>
<li><a href="#what-is-an-application-programming-interface">3.1. What is an Application Programming Interface?</a></li>
<li><a href="#creating-our-api">3.2. Creating our API</a></li>
<li><a href="#starting-our-server">3.3. Starting our server</a></li>
<li><a href="#adding-another-endpoint">3.4. Adding another endpoint</a>
<ul>
<li><a href="#live-reload-and-other-tooling">3.4.1. Live-reload and other tooling</a></li>
</ul>
</li>
<li><a href="#back-to-our-endpoint">3.5. Back to our endpoint</a></li>
</ul>
</li>
<li><a href="#http-api-deep-dive">4. HTTP + API Deep-dive</a></li>
<li><a href="#intro-to-mongodb">5. Intro to MongoDB</a>
<ul>
<li><a href="#schemas-in-mongodb">5.1. Schemas in MongoDB</a></li>
<li><a href="#mongodb-operations">5.2. MongoDB Operations</a>
<ul>
<li><a href="#inserting-documents">5.2.1. Inserting documents</a></li>
<li><a href="#finding-filtering-or-querying-documents">5.2.2. Finding (Filtering or Querying) documents</a></li>
<li><a href="#deleting-documents">5.2.3. Deleting documents</a></li>
<li><a href="#updating-documents">5.2.4. Updating documents</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#javascript-deep-dive">6. JavaScript Deep-Dive</a>
<ul>
<li><a href="#async-await-and-the-promise-of-a-path-out-of-callback-hell">6.1. Async, Await and the Promise of a Path out of Callback Hell</a>
<ul>
<li><a href="#callback-hell">6.1.1. Callback Hell</a></li>
<li><a href="#the-promise-of-heaven">6.1.2. The Promise of Heaven</a></li>
<li><a href="#awaiting-salvation">6.1.3. Awaiting salvation</a></li>
</ul>
</li>
<li><a href="#fun-with-functions">6.2. Fun with functions</a>
<ul>
<li><a href="#implementing-our-own-map">6.2.1. Implementing our own <code>map</code></a></li>
<li><a href="#implementing-our-own-filter">6.2.2. Implementing our own <code>filter</code></a></li>
<li><a href="#implementing-our-own-reducelist">6.2.3. Implementing our own <code>reduceList</code></a></li>
<li><a href="#implementing-our-own-reduce">6.2.4. Implementing our own <code>reduce</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#further-into-apis">7. Further into APIs</a>
<ul>
<li><a href="#what-is-a-rest-api">7.1. What is a REST API?</a></li>
</ul>
</li>
<li><a href="#how-to-structure-your-project">8. How to Structure your Project</a>
<ul>
<li><a href="#how-many-repos">8.1. How many Repos?</a></li>
<li><a href="#what-should-i-use-for-the-client">8.2. What should I use for the client?</a>
<ul>
<li><a href="#but-i-want-to-be-adventurous">8.2.1. But I want to be adventurous!!</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#resources-and-useful-links">9. Resources and useful links</a></li>
</ul>
</div>
</nav>
<p>
This course aims to give you an understanding of back-end development and in it you will learn how to build an HTTP server in node.js and integrating it with a MongoDB database. The course will focus a lot on JavaScript and give you an understanding for how the language works so you will be able to solve issues in your code more readily.
</p>

<p>
You can find working code samples for each chapter along with some exercises in <a href="https://github.com/iensu/data-interaction-course-materials">the course Github repository</a>.
</p>

<div id="outline-container-setting-up-your-environment" class="outline-2">
<h2 id="setting-up-your-environment"><span class="section-number-2">1</span> Setting up your Environment</h2>
<div class="outline-text-2" id="text-setting-up-your-environment">
<p>
In order to follow along with this course you will want to have the following installed:
</p>

<ul class="org-ul">
<li><a href="https://nodejs.org/en/">node.js</a> v16 or higher</li>
<li><code>npm</code></li>
<li>An editor with proper JavaScript support (VSCode, Sublime, Vim, Emacs, &#x2026;)</li>
<li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git</a></li>
</ul>

<p>
You can check that you have all necessary command line tools by running the following commands in your terminal:
</p>

<div class="org-src-container">
<pre class="src src-shell">node --version
npm --version
git --version
</pre>
</div>
</div>

<div id="outline-container-setting-up-mongodb" class="outline-3">
<h3 id="setting-up-mongodb"><span class="section-number-3">1.1</span> Setting up MongoDB</h3>
<div class="outline-text-3" id="text-setting-up-mongodb">
<p>
Finally you will need to have access to <a href="https://docs.mongodb.com/manual/installation/">MongoDB</a>. The company MongoDB is pushing really hard for you to use the free-tier of their cloud service Atlas. Unfortunately it requires you to create an account and forces you to go through a lot of settings and options. It's important that you choose the free tier, otherwise you can just use the defaults. They will also apparently bombard you with marketing emails, so if you decide to create an account I recommend you use a throwaway email account.
</p>

<p>
If you don't like to go through the hassle of setting up an account you can either 1) install MongoDB locally following the instructions in link above or 2) use <a href="https://hub.docker.com/_/mongo/">the Docker image</a> if you are comfortable with Docker. Personally I installed it locally.
</p>

<p>
MongoDB Compass offers a graphical interface to your database and often comes bundled when installing it locally. If you don't have it installed you can follow <a href="https://www.mongodb.com/try/download/compass">these instructions</a>.
</p>
</div>

<div id="outline-container-installing-and-running-mongodb-on-macos" class="outline-4">
<h4 id="installing-and-running-mongodb-on-macos"><span class="section-number-4">1.1.1</span> Installing and running MongoDB on MacOS</h4>
<div class="outline-text-4" id="text-installing-and-running-mongodb-on-macos">
<p>
As long as you have <a href="https://brew.sh/">Homebrew</a> installed it's very easy to install both MongoDB and MongoDB Compass on your computer:
</p>

<div class="org-src-container">
<pre class="src src-shell">brew tap mongodb/brew
brew install mongodb-community@5.0
brew install mongodb-compass
</pre>
</div>

<p>
Installing the <code>mongodb-community</code> package should give you two commands:
</p>
<ul class="org-ul">
<li><code>mongosh</code> for interacting with a MongoDB database through the terminal.</li>
<li><code>mongod</code> for starting a MongoDB database process (the final <i>d</i> stands for <i>daemon</i> and means a long-running process).</li>
</ul>

<p>
When installing through Homebrew it seems that running <code>mongod</code> by itself doesn't work. So instead you need to start MongoDB as a Homebrew service, which means that MongoDB will be running in the background. You do this by running:
</p>

<div class="org-src-container">
<pre class="src src-shell">brew services start mongodb/brew/mongodb-community
</pre>
</div>

<p>
If everything works, you should be able to run <code>mongosh</code> and be taken to a MongoDB prompt.
</p>


<figure id="org5304702">
<img src="./assets/mongodb-prompt.png" alt="mongodb-prompt.png">

<figcaption><span class="figure-number">Figure 1: </span>Running <code>mongosh</code> should open a MongoDB prompt like this one</figcaption>
</figure>

<p>
If this is not working you can list your <code>brew</code> services by running <code>brew services list</code> and see the status of <code>mongodb-community</code>. you can show detailed information about it by running:
</p>

<div class="org-src-container">
<pre class="src src-shell">brew services info mongodb-community
</pre>
</div>
</div>
</div>

<div id="outline-container-installing-and-running-mongodb-on-windows" class="outline-4">
<h4 id="installing-and-running-mongodb-on-windows"><span class="section-number-4">1.1.2</span> Installing and running MongoDB on Windows</h4>
<div class="outline-text-4" id="text-installing-and-running-mongodb-on-windows">
<p>
As long as you have Windows 10 (October 2018 update) or newer it's very easy to install both MongoDB and MongoDB Compass on your computer using <code>winget</code>:
</p>

<div class="org-src-container">
<pre class="src src-shell">winget install mongodb.server
winget install mongodb.compass.full
</pre>
</div>

<p>
Installing <code>mongodb.server</code> installs mongodb as a service that automatically starts when you start your computer.
You can change it with the <code>services</code> application (or <code>sc</code> if you rather like using a terminal).
</p>

<p>
The MongoDB Compass application is easily launched by pressing Start and typing <code>mongodb</code>.
To connect Compass to your server, you simply press "Connect" (no connection string required).
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-introduction-to-nodejs" class="outline-2">
<h2 id="introduction-to-nodejs"><span class="section-number-2">2</span> Introduction to node.js</h2>
<div class="outline-text-2" id="text-introduction-to-nodejs">
<p>
In short, node.js is JavaScript for servers and is now one of the most prevalent programming languages in the world. How come it quickly got so popular?
</p>

<ul class="org-ul">
<li>The same language across the stack (front-end and back-end)</li>
<li>Simplify the transition to full-stack for front-end developers</li>
<li>The asynchronous nature of JavaScript makes it great for easily building high performance HTTP servers</li>
</ul>

<p>
In summary: familiarity and performance
</p>

<p>
Node.JS was created 12 years ago by creating a system interface to Chrome’s <a href="https://en.wikipedia.org/wiki/V8_(JavaScript_engine)">V8 JavaScript engine</a>. That means that Node.JS is running the same version of JavaScript as Chrome and other <a href="https://en.wikipedia.org/wiki/Chromium_(web_browser)">Chromium</a>-based browsers such as Microsoft Edge, Brave etc. Which V8 version Node uses dictates what JavaScript features it supports. If you are curious you can check which exact version of V8 your node.js installation is using by running the following command in a terminal:
</p>

<div class="org-src-container">
<pre class="src src-shell">node -p process.versions.v8
</pre>
</div>
</div>

<div id="outline-container-nodejs-vs-the-browser" class="outline-3">
<h3 id="nodejs-vs-the-browser"><span class="section-number-3">2.1</span> node.js vs the Browser</h3>
<div class="outline-text-3" id="text-nodejs-vs-the-browser">
<p>
Moving JavaScript out of the browser and onto the server results in a few important differences:
</p>

<ul class="org-ul">
<li>There's no browser environment, that is you do not have access to the global <code>window</code> and <code>document</code> objects.</li>
<li>You instead have the global variable <code>global</code> to refer to the global scope.</li>
<li>You have the global variable <code>process</code> for reading environment variables etc.</li>
<li>You have access to built-in modules for doing things like reading and writing files and networking etc.</li>
</ul>
</div>
</div>

<div id="outline-container-hello-node" class="outline-3">
<h3 id="hello-node"><span class="section-number-3">2.2</span> Hello Node</h3>
<div class="outline-text-3" id="text-hello-node">
<p>
We are going to play around with node.js a bit. First create a new directory called <code>hello-node</code> and move into it. Now create a file called <code>index.js</code> and write the following piece of code:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>Writing to the terminal</label><pre class="src src-js"><span class="linenr">1: </span>console.log(<span class="org-string">"Hello node! \(&gt;0&lt;)/"</span>)
</pre>
</div>

<p>
Now you can run your program with the command <code>node index.js</code> and you should see <code>Hello node! \(&gt;0&lt;)/</code> printed to your terminal. We have run JavaScript outside of the browser and successfully printed text, hooray!
</p>

<aside id="org6118f0d">
<p>
<b>Why index.js?</b>
</p>

<p>
Naming the main file JavaScript file <code>index.js</code> is a convention and has no special meaning to node.js itself apart from it being loaded by default when importing a directory. You can think of it as being analogous to <code>index.html</code> on a website.
</p>
</aside>
</div>

<div id="outline-container-using-built-in-modules" class="outline-4">
<h4 id="using-built-in-modules"><span class="section-number-4">2.2.1</span> Using built-in modules</h4>
<div class="outline-text-4" id="text-using-built-in-modules">
<p>
Let's use the built-in file system module <code>fs</code> to play around with files.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>Writing to files</label><pre class="src src-js"><span class="linenr"> 1: </span><span class="org-keyword">import</span> fs from <span class="org-string">"fs"</span>;
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span class="org-keyword">const</span> <span class="org-variable-name">databases</span> = [
<span class="linenr"> 4: </span>  { name: <span class="org-string">'MongoDB'</span>, type: <span class="org-string">'document'</span> },
<span class="linenr"> 5: </span>  { name: <span class="org-string">'PostgreSQL'</span>, type: <span class="org-string">'relational'</span> },
<span class="linenr"> 6: </span>  { name: <span class="org-string">'Neo4j'</span>, type: <span class="org-string">'graph'</span> },
<span class="linenr"> 7: </span>  { name: <span class="org-string">'Redis'</span>, type: <span class="org-string">'in-memory'</span> },
<span class="linenr"> 8: </span>];
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>fs.writeFileSync(<span class="org-string">"test.txt"</span>, JSON.stringify(databases, <span class="org-constant">null</span>, 2));
<span class="linenr">11: </span>
<span class="linenr">12: </span><span class="org-keyword">const</span> <span class="org-variable-name">contents</span> = fs.readFileSync(<span class="org-string">"test.txt"</span>).toString();
<span class="linenr">13: </span>
<span class="linenr">14: </span>console.log(<span class="org-string">`File contents: ${contents}`</span>);
</pre>
</div>

<aside id="orgbe147a8">
<p>
<b>ES6 modules vs. CommonJS modules</b>
</p>

<p>
The node.js ecosystem is in a state of transitioning towards ES6 modules from the default CommonJS style modules. ES6 modules are sometimes referred to as JavaScript modules or EcmaScript modules.
</p>

<table>
<caption class="t-above"><span class="table-number">Table 1:</span> Syntax comparison between ES6 and CommonJS modules</caption>

<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">&#xa0;</th>
<th scope="col" class="org-left">ES6</th>
<th scope="col" class="org-left">CommonJS</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Imports</td>
<td class="org-left"><code>import x from 'x'</code></td>
<td class="org-left"><code>const x = require('x')</code></td>
</tr>

<tr>
<td class="org-left">Named exports</td>
<td class="org-left"><code>export x</code></td>
<td class="org-left"><code>module.exports.x = { x }</code></td>
</tr>

<tr>
<td class="org-left">Default exports</td>
<td class="org-left"><code>export default x</code></td>
<td class="org-left"><code>module.exports = x</code></td>
</tr>
</tbody>
</table>

<p>
In the examples in this course we are going to use ES6 modules because that syntax is commonly used on the front-end. In order to use ES6 modules in node.js code you need to set the <code>type</code> property to <code>module</code> in <code>package.json</code>. You can quickly generate a <code>package.json</code> file by running <code>npm init --yes</code> in the terminal.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>Add support for ES6 modules by editing package.json</label><pre class="src src-json">{
  "name": "hello-node",
  "type": "module",
  ...
}
</pre>
</div>

<p>
The difference between the module systems lies not only in cosmetics but also semantics, ES6 modules being a lot more restrictive in when and how you can import modules. Given the flexibility of CommonJS modules we might never see a full transition to ES6 modules.
</p>
</aside>
</div>
</div>

<div id="outline-container-writing-our-own-module" class="outline-4">
<h4 id="writing-our-own-module"><span class="section-number-4">2.2.2</span> Writing our own module</h4>
<div class="outline-text-4" id="text-writing-our-own-module">
<p>
Let's create new module with a function that randomly picks an element from a list. And let's call it from <code>index.js</code>.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>random-element.js</label><pre class="src src-js"><span class="linenr">1: </span><span class="org-keyword">export</span> <span class="org-keyword">default</span> <span class="org-keyword">function</span> randomElement(<span class="org-variable-name">xs</span>) {
<span class="linenr">2: </span>  <span class="org-keyword">const</span> <span class="org-variable-name">randomIndex</span> = Math.floor((Math.random() * 10) % xs.length)
<span class="linenr">3: </span>
<span class="linenr">4: </span>  <span class="org-keyword">return</span> xs[index];
<span class="linenr">5: </span>}
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>index.js</label><pre class="src src-js"><span class="org-keyword">import</span> fs from <span class="org-string">"fs"</span>;
<span class="org-keyword">import</span> randomElement from <span class="org-string">'./random-element.js'</span>;

<span class="org-keyword">const</span> <span class="org-variable-name">databases</span> = [
  { name: <span class="org-string">'MongoDB'</span>, type: <span class="org-string">'document'</span> },
  { name: <span class="org-string">'PostgreSQL'</span>, type: <span class="org-string">'relational'</span> },
  { name: <span class="org-string">'Neo4j'</span>, type: <span class="org-string">'graph'</span> },
  { name: <span class="org-string">'Redis'</span>, type: <span class="org-string">'in-memory'</span> },
];

<span class="org-comment-delimiter">// </span><span class="org-comment">...</span>

<span class="org-keyword">const</span> <span class="org-variable-name">randomDatabase</span> = randomElement(databases);

console.log(<span class="org-string">`Got database: ${randomDatabase}`</span>);
</pre>
</div>
</div>
</div>

<div id="outline-container-messing-around-with-the-global-scope" class="outline-4">
<h4 id="messing-around-with-the-global-scope"><span class="section-number-4">2.2.3</span> Messing around with the global scope</h4>
<div class="outline-text-4" id="text-messing-around-with-the-global-scope">
<p>
Using modules is not the only way of sharing functionality, you can also manipulate the global scope by modifying the <code>global</code> variable.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>modifying-global-scope.js</label><pre class="src src-js"><span class="linenr">1: </span><span class="org-keyword">let</span> <span class="org-variable-name">count</span> = 0;
<span class="linenr">2: </span>
<span class="linenr">3: </span>global.ourGlobalFunction = (source) =&gt; {
<span class="linenr">4: </span>  count++;
<span class="linenr">5: </span>  console.log(<span class="org-string">`Call count: ${count} (from ${source})`</span>);
<span class="linenr">6: </span>};
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 7: </span>Importing the file updates the global scope (index.js)</label><pre class="src src-js"><span class="linenr"> 1: </span><span class="org-keyword">import</span> fs from <span class="org-string">"fs"</span>;
<span class="linenr"> 2: </span><span class="org-keyword">import</span> randomElement from <span class="org-string">'./random-element.js'</span>;
<span class="linenr"> 3: </span><span class="org-keyword">import</span> <span class="org-string">'./modifying-global-scope.js'</span>;
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>global.ourGlobalFunction(<span class="org-keyword">import</span>.meta.url);
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span class="org-comment-delimiter">// </span><span class="org-comment">Since the scope is global we can even call it directly as well</span>
<span class="linenr"> 8: </span>ourGlobalFunction(<span class="org-keyword">import</span>.meta.url);
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span class="org-comment-delimiter">// </span><span class="org-comment">...</span>
</pre>
</div>

<p>
<b>Exercise</b> Try calling <code>ourGlobalFunction</code> from <code>randomElement.js</code>. Try both within the function and outside. Is it working? If not, why not?
</p>

<p>
Finally, <b>please do not modify <code>global</code> in <i>real</i> code</b>. it breaks encapsulation and makes it more difficult to understand what's going on.
</p>
</div>
</div>

<div id="outline-container-reading-environment-variables" class="outline-4">
<h4 id="reading-environment-variables"><span class="section-number-4">2.2.4</span> Reading environment variables</h4>
<div class="outline-text-4" id="text-reading-environment-variables">
<p>
Another thing we can do in node.js that we can't do in the browser is to get information about the current environment especially things like environment variables.
</p>

<p>
We can access environment variables via the <code>process</code> variable:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 8: </span>Reading environment variables</label><pre class="src src-js">console.log(<span class="org-string">'USER:'</span>, process.env.USER); <span class="org-comment-delimiter">// </span><span class="org-comment">Prints your username</span>
console.log(<span class="org-string">'MY_VARIABLE'</span>, process.env.MY_VARIABLE); <span class="org-comment-delimiter">// </span><span class="org-comment">Prints undefined</span>
</pre>
</div>

<aside id="org69e6fb9">
<p>
<b>What are environment variables?</b>
</p>

<p>
Environment variables are string key-value pairs declared in the environment and are used extensively to configure applications and services. On Linux and MacOS you can list all environment variables in the terminal by running the <code>env</code> command, on Windows you run <code>SET</code>. Some common environment variables are listed blow:
</p>

<table>
<caption class="t-above"><span class="table-number">Table 2:</span> Examples of predefined environment variables</caption>

<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Variable</th>
<th scope="col" class="org-left">Functionality</th>
<th scope="col" class="org-left">OS</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>PATH</code></td>
<td class="org-left">Specifies which directories have executable programs</td>
<td class="org-left">Linux, MacOS, Win</td>
</tr>

<tr>
<td class="org-left"><code>EDITOR</code></td>
<td class="org-left">Specifies what editor to open files with from the terminal</td>
<td class="org-left">Linux, MacOS, Win?</td>
</tr>

<tr>
<td class="org-left"><code>USER</code></td>
<td class="org-left">The currently logged in user</td>
<td class="org-left">Linux, MacOS, Win?</td>
</tr>
</tbody>
</table>

<p>
Environment variables can be created freely and this allows us to configure our application depending on the environment (production, test, local development) without having to do explicit checks in the code itself.
</p>

<p>
On MacOS and Linux you can set environment variables with the <code>export</code> command.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 9: </span>Setting the environment variable <code>MY_VARIABLE</code> in the terminal</label><pre class="src src-shell"><span class="org-builtin">export</span> <span class="org-variable-name">MY_VARIABLE</span>=foo
</pre>
</div>
</aside>
</div>
</div>
</div>
</div>

<div id="outline-container-our-first-api" class="outline-2">
<h2 id="our-first-api"><span class="section-number-2">3</span> Our First API</h2>
<div class="outline-text-2" id="text-our-first-api">
</div>
<div id="outline-container-what-is-an-application-programming-interface" class="outline-3">
<h3 id="what-is-an-application-programming-interface"><span class="section-number-3">3.1</span> What is an Application Programming Interface?</h3>
<div class="outline-text-3" id="text-what-is-an-application-programming-interface">
<ul class="org-ul">
<li>An API is a set of exposed methods for interacting with a program or package.</li>
<li>When you write a JavaScript module and export functions to interact with it you are designing an API.</li>
<li>When you are interacting with a third-party package, for example <code>express</code>, you are using its API.</li>
<li>Designing an API allows you to create a layer of abstraction which hides implementation details and simplifies using your service or package.</li>
</ul>

<p>
Often when we say API we actually mean an HTTP API to be specific, that is an API which is used over the internet using HTTP.
</p>
</div>
</div>

<div id="outline-container-creating-our-api" class="outline-3">
<h3 id="creating-our-api"><span class="section-number-3">3.2</span> Creating our API</h3>
<div class="outline-text-3" id="text-creating-our-api">
<p>
Express is by far the most popular NPM package for creating HTTP APIs in node.js and has been around almost as long as the language itself. Start by creating a new directory called <code>hello-express</code> and initialize it using <code>npm init</code> (also don't forget to update <code>package.json</code> if you want to use ES6 modules). Now let's install Express:
</p>

<div class="org-src-container">
<pre class="src src-shell">npm install express
</pre>
</div>

<p>
Now let's create our first API by creating a new file called <code>index.js</code> in the project root directory and write the following code:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 10: </span>Our first API</label><pre class="src src-js"><span class="linenr"> 1: </span><span class="org-keyword">import</span> express from <span class="org-string">'express'</span>;
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span class="org-keyword">const</span> <span class="org-variable-name">app</span> = express();
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>app.get(<span class="org-string">'/hello'</span>, (req, res) =&gt; {
<span class="linenr"> 6: </span>  res.send(<span class="org-string">'Hello there!'</span>).end();
<span class="linenr"> 7: </span>});
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span class="org-keyword">const</span> <span class="org-variable-name">PORT</span> = 8080;
<span class="linenr">10: </span>
<span class="linenr">11: </span>app.listen(PORT, () =&gt; {
<span class="linenr">12: </span>  console.log(<span class="org-string">`Server running at http://localhost:${PORT}`</span>)
<span class="linenr">13: </span>});
</pre>
</div>

<p>
There is <i>a lot</i> to unpack here&#x2026;
</p>
<ul class="org-ul">
<li>We begin by creating an instance of an Express app.</li>
<li>Then we <i>register</i> a handler on the <code>/hello</code> endpoint which will respond with <i>Hello there!</i>.</li>
<li>Lastly we start a server listening on <i>port</i> 8080.</li>
</ul>
</div>
</div>

<div id="outline-container-starting-our-server" class="outline-3">
<h3 id="starting-our-server"><span class="section-number-3">3.3</span> Starting our server</h3>
<div class="outline-text-3" id="text-starting-our-server">
<p>
Run your program by executing <code>node index.js</code>. The first thing you will notice is that your program never quits: you see the message <code>Server running at http://localhost:8080</code> but you don't get a new prompt. This is because your program is running a <b>server</b> which is meant to serve <b>responses</b> to <b>requests</b> from <b>clients</b> and your program needs to be kept alive and running to be able to do that.
</p>

<p>
A client is whatever uses, or <i>consumes</i>, the API served by your server and can be anything from a web browser, website, another server or a command-line tool etc. For now, let's use our browser as the client and access the URL printed out by the program: <a href="http://localhost:8080">http://localhost:8080</a>. You should see an error message saying something like <code>Cannot GET /</code>.
</p>


<figure id="orge18c3ca">
<img src="./assets/cannot-get-slash.png" alt="cannot-get-slash.png">

<figcaption><span class="figure-number">Figure 2: </span>Accessing an unregistered endpoint results in an error message</figcaption>
</figure>

<p>
This means that we tried to <code>GET</code> something at the endpoint <code>/</code>. We'll get more into what <code>GET</code> actually means later when we talk about HTTP, but for now let's try changing the endpoint and go to <a href="http://localhost:8080/hello">http://localhost:8080/hello</a> instead. Now you should instead see the expected message <code>Hello there!</code>.
</p>


<figure id="orga6e91ba">
<img src="./assets/hello-express-endpoint.png" alt="hello-express-endpoint.png">

<figcaption><span class="figure-number">Figure 3: </span>Successful call to our /hello endpoint</figcaption>
</figure>

<p>
So what went wrong the first time? There are four pieces of information needed to interact with a server:
</p>

<ul class="org-ul">
<li>The <b>protocol</b> the server expects (<code>http</code>)</li>
<li>The <b>machine</b> the server is running on (our machine <code>localhost</code> or <code>127.0.0.1</code> if we use its IP address). This is also called the <b>host</b>.</li>
<li>The <b>port</b> the server is listening on (<code>8080</code>)</li>
<li>The <b>endpoint</b> we want to consume (<code>/hello</code>)</li>
</ul>

<p>
A server only responds on the port it is listening on and only handles requests on endpoints which have been registered on it. When not specifying an endpoint, the browser will pick the default one which is <code>/</code> and since we never registered a handler for that endpoint the request failed. You can think of endpoints as file paths on your own computer.
</p>

<aside id="org2e37976">
<p>
<b>Ports</b>
</p>

<p>
You can choose any port number for your service between 1025 to 65535 as long as some other currently running service (program) isn't already listening on it. It is very common to see people assign 8080 and I think this comes from repeating 80 which is the default port for the HTTP protocol. When you specify <code>http://</code> in the URL <code>:80</code> is implicitly appended to the host. In other words, a port is always used even if it is not explicit in the URL. Below is a table of some reserved ports:
</p>

<table>


<colgroup>
<col  class="org-right">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Port</th>
<th scope="col" class="org-left">Protocol</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">80</td>
<td class="org-left"><code>http://</code></td>
</tr>

<tr>
<td class="org-right">443</td>
<td class="org-left"><code>https://</code></td>
</tr>

<tr>
<td class="org-right">22</td>
<td class="org-left"><code>ssh://</code></td>
</tr>

<tr>
<td class="org-right">20,21</td>
<td class="org-left"><code>ftp://</code></td>
</tr>
</tbody>
</table>
</aside>
</div>
</div>

<div id="outline-container-adding-another-endpoint" class="outline-3">
<h3 id="adding-another-endpoint"><span class="section-number-3">3.4</span> Adding another endpoint</h3>
<div class="outline-text-3" id="text-adding-another-endpoint">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 11: </span>Our next endpoint</label><pre class="src src-js"><span class="org-comment-delimiter">// </span><span class="org-comment">...</span>

app.get(<span class="org-string">'/another-page'</span>, (req, res) =&gt; {
  res.send(<span class="org-string">'Another page!'</span>).end();
});

<span class="org-comment-delimiter">// </span><span class="org-comment">...</span>
</pre>
</div>

<p>
If we add another endpoint and try to access it in the browser: <a href="http://localhost:8080/another-page">http://localhost:8080/another-page</a> we get the same error message as we did before.
</p>

<p>
The reason is that the server process is already running and changes made to the code will not be reflected until it is restarted. You can stop the server by selecting the terminal where it is running and press Ctrl-c (that means pressing the Ctrl button and the <code>c</code> key at the same time). This will terminate your server and get you back to the terminal prompt.
</p>

<p>
If you now run <code>node index.js</code> again you will be able to access <a href="http://localhost:8080/another-page">http://localhost:8080/another-page</a>.
</p>
</div>

<div id="outline-container-live-reload-and-other-tooling" class="outline-4">
<h4 id="live-reload-and-other-tooling"><span class="section-number-4">3.4.1</span> Live-reload and other tooling</h4>
<div class="outline-text-4" id="text-live-reload-and-other-tooling">
<p>
A workflow like the above is not only annoying but it can also lead to long troubleshooting sessions trying to figure out why something isn't working, when in the end you just had to restart the server. Thankfully there is an NPM package which helps us automate this workflow: <a href="https://nodemon.io/">nodemon</a>. Since we only need it for development we install it as a development dependency:
</p>

<div class="org-src-container">
<pre class="src src-shell">npm install --save-dev nodemon
</pre>
</div>

<p>
Now we add a convenience script called <code>dev</code> in <code>package.json</code> to make it easy to use it:
</p>

<div class="org-src-container">
<pre class="src src-json">{
  // ...
  "scripts": {
    "dev": "nodemon index.js",
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  }
  // ...
}
</pre>
</div>

<p>
By running <code>npm run dev</code> your server will be started up and <code>nodemon</code> will watch your files for changes and restart the server when necessary.
</p>

<p>
There is another tool I highly recommend you install and that is <a href="https://prettier.io/">prettier</a>. This tool formats your code automatically and you should be able to make your editor run it every time you save. Here is a <a href="https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode">VSCode plugin</a> and here is one for <a href="https://github.com/prettier/prettier-emacs">Emacs</a>.
</p>
</div>
</div>
</div>

<div id="outline-container-back-to-our-endpoint" class="outline-3">
<h3 id="back-to-our-endpoint"><span class="section-number-3">3.5</span> Back to our endpoint</h3>
<div class="outline-text-3" id="text-back-to-our-endpoint">
<p>
Let's make our new endpoint do something more interesting: let's see what happens if we serve a string which looks like HTML.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 12: </span>Serving an HTML string</label><pre class="src src-js"><span class="org-comment-delimiter">// </span><span class="org-comment">...</span>

app.get(<span class="org-string">"/another-page"</span>, (req, res) =&gt; {
  res
    .send(
      <span class="org-string">`</span>
<span class="org-string">&lt;html&gt;</span>
<span class="org-string">&lt;head&gt;</span>
<span class="org-string">  &lt;style&gt;</span>
<span class="org-string">  body {</span>
<span class="org-string">    margin: 32px;</span>
<span class="org-string">    background: hotpink;</span>
<span class="org-string">    color: darkgreen;</span>
<span class="org-string">    font-family: arial;</span>
<span class="org-string">  }</span>
<span class="org-string">  &lt;/style&gt;</span>
<span class="org-string">&lt;/head&gt;</span>
<span class="org-string">&lt;body&gt;</span>
<span class="org-string">  &lt;h1&gt;Our beautiful page&lt;/h1&gt;</span>
<span class="org-string">  &lt;marquee&gt;We're serving a string which is rendered as a web page!&lt;/marquee&gt;</span>
<span class="org-string">&lt;/body&gt;</span>
<span class="org-string">&lt;/html&gt;</span>
<span class="org-string">`</span>
    )
    .end();
});

<span class="org-comment-delimiter">// </span><span class="org-comment">...</span>
</pre>
</div>

<p>
And we can see that our browser interprets it as HTML! The secret is that the browser interprets EVERYTHING as HTML, so we shouldn't be surprised.
</p>

<p>
While it's pretty cool that we can serve web pages as plain strings, what you usually want to do is to serve HTML files instead. We move our HTML to a file which we can call <code>beautiful-page.html</code>.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 13: </span>Our beautiful HTML markup in a file of its own</label><pre class="src src-html">&lt;<span class="org-function-name">html</span>&gt;
&lt;<span class="org-function-name">head</span>&gt;
  &lt;<span class="org-function-name">style</span>&gt;
  body {
    margin: 32px;
    background: hotpink;
    color: darkgreen;
    font-family: arial;
  }
  &lt;/<span class="org-function-name">style</span>&gt;
&lt;/<span class="org-function-name">head</span>&gt;
&lt;<span class="org-function-name">body</span>&gt;
  &lt;<span class="org-function-name">h1</span>&gt;<span class="org-underline"><span class="org-bold">Our beautiful page</span></span>&lt;/<span class="org-function-name">h1</span>&gt;
  &lt;<span class="org-function-name">marquee</span>&gt;We're serving a string which is rendered as a web page!&lt;/<span class="org-function-name">marquee</span>&gt;
&lt;/<span class="org-function-name">body</span>&gt;
&lt;/<span class="org-function-name">html</span>&gt;
</pre>
</div>

<p>
And we change our handler to read that file and serve its contents.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 14: </span>Serving HTML from a file</label><pre class="src src-js"><span class="org-keyword">import</span> express from <span class="org-string">"express"</span>;
<span class="org-keyword">import</span> fs from <span class="org-string">"fs"</span>;

<span class="org-comment-delimiter">// </span><span class="org-comment">...</span>

app.get(<span class="org-string">"/another-page"</span>, (req, res) =&gt; {
  <span class="org-keyword">const</span> <span class="org-variable-name">contents</span> = fs.readFileSync(<span class="org-string">"beautiful-page.html"</span>).toString();

  res.send(contents).end();
});

<span class="org-comment-delimiter">// </span><span class="org-comment">...</span>
</pre>
</div>

<p>
The page should load like before but the code looks a lot nicer without the inline HTML.
</p>

<p>
A website made up from files like this is called a <b>static website</b>. This is how the whole web worked through-out the 90s and the beginning of the 00s until <b>Single Page Applications</b> (SPAs) became a thing. In this course we will assume you will write your website as a SPA (in React), so we won't be serving static pages. In addition, the above code is highly inefficient and is just for illustrative purposes. First we are reading the HTML file for every request even though the contents doesn't change, this will lead to a lot of file system access which impacts performance. Second, we send the page a single string all at once which also impacts performance. If you are interested in how to serve static web pages using Express you can have a look <a href="https://expressjs.com/en/starter/static-files.html">at this documentation</a>.
</p>
</div>
</div>
</div>

<div id="outline-container-http-api-deep-dive" class="outline-2">
<h2 id="http-api-deep-dive"><span class="section-number-2">4</span> HTTP + API Deep-dive</h2>
<div class="outline-text-2" id="text-http-api-deep-dive">
</div>
</div>
<div id="outline-container-intro-to-mongodb" class="outline-2">
<h2 id="intro-to-mongodb"><span class="section-number-2">5</span> Intro to MongoDB</h2>
<div class="outline-text-2" id="text-intro-to-mongodb">
<p>
MongoDB is a <a href="https://www.mongodb.com/document-databases">document (NoSQL) database</a> and has a few important characteristics which makes it a suitable as a first database:
</p>

<ul class="org-ul">
<li>Flexible data schemas.</li>
<li>Intuitive data models (basically looks like JSON).</li>
<li>Simple yet powerful query language.</li>
</ul>

<p>
MongoDB, and document databases in general, are often used in MVPs and prototypes when you are still exploring and have yet to decide on the data models to use. This does not mean however that they are not production-ready: document databases are among the most scalable databases out there and allow for efficient horizontal scaling (this means running multiple connected instances in a database cluster).
</p>

<p>
While we discuss MongoDB specifically in this section many of the concepts are applicable to other document databases as well such as CouchDB and elasticsearch, though the terminology might be a bit different.
</p>

<p>
A MongoDB system consists of one or several <b>databases</b>, which each can have one or multiple <b>collections</b> and each collection contains <b>documents</b>. Documents are the central concept of a document database, naturally.
</p>
</div>

<div id="outline-container-schemas-in-mongodb" class="outline-3">
<h3 id="schemas-in-mongodb"><span class="section-number-3">5.1</span> Schemas in MongoDB</h3>
<div class="outline-text-3" id="text-schemas-in-mongodb">
<p>
The main selling point of MongoDB compared to relational (SQL) databases (MySQL, Postgres, &#x2026;) is the flexibility. In relational databases you have to define how your data is structured and the relationship between different kinds of data models. The structure of your data is called its schema or sometimes its data model and defines the properties it has and what data types these properties have. Here's a made-up example of how a schema might look like:
</p>

<div class="org-src-container">
<pre class="src src-js">PersonSchema = {
  <span class="org-string">"id"</span>: <span class="org-string">"string"</span>,
  <span class="org-string">"name"</span>: <span class="org-string">"string"</span>,
  <span class="org-string">"age"</span>: <span class="org-string">"integer"</span>,
  <span class="org-string">"weight"</span>: <span class="org-string">"float"</span>,
}
</pre>
</div>

<p>
In a <b>relational database</b> a schema like the above ensures for instance that a <code>Person</code>'s name is a <code>string</code> and that its weight is a <code>float</code>. If you would try to store a <code>Person</code> with a <code>string</code> weight the operation would fail. This makes it difficult for bad and ill-structured data to enter the database.
</p>

<p>
In a <b>document database</b> schemas still exist, but they are just suggestions and are meant to improve performance when querying the data. As you most likely will see when you start to work with MongoDB yourself is that it will happily accept a <code>float</code> as the <code>name</code>, or even allow you to insert documents with a completely different set of properties in the same collection.
</p>


<figure id="orgdcdf2f6">
<img src="./assets/mongodb-compass-table-example.png" alt="mongodb-compass-table-example.png">

<figcaption><span class="figure-number">Figure 4: </span>Table data view in MongoDB Compass showing the inferred types for each column</figcaption>
</figure>


<p>
This flexibility is something to be mindful of and I recommend using MongoDB Compass to explore your data set from time to time to ensure that it looks like you expect it to.
</p>
</div>
</div>

<div id="outline-container-mongodb-operations" class="outline-3">
<h3 id="mongodb-operations"><span class="section-number-3">5.2</span> MongoDB Operations</h3>
<div class="outline-text-3" id="text-mongodb-operations">
<p>
Operations are ways of interacting with your database in the terms of data, the most general operations being:
</p>

<ul class="org-ul">
<li><b>Create</b> data</li>
<li><b>Read</b> data</li>
<li><b>Update</b> data</li>
<li><b>Delete</b> data</li>
</ul>

<p>
These are often called CRUD operations for short.
</p>

<p>
The following sections describes what the common CRUD operations are in MongoDB and examples assume that you have a connected <code>db</code> database instance available:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 15: </span>Prelude to the examples below</label><pre class="src src-js"><span class="org-keyword">const</span> <span class="org-variable-name">client</span> = mongodb.MongoClient(<span class="org-string">'mongodb://localhost:27017'</span>);
<span class="org-keyword">await</span> client.connect();

<span class="org-keyword">const</span> <span class="org-variable-name">db</span> = client.db(<span class="org-string">'mongodb-intro'</span>);
</pre>
</div>

<p>
The code assumes that you have the <code>mongodb</code> package in scope and you are in an <code>async</code> context where you can use <code>async</code>.
</p>
</div>

<div id="outline-container-inserting-documents" class="outline-4">
<h4 id="inserting-documents"><span class="section-number-4">5.2.1</span> Inserting documents</h4>
<div class="outline-text-4" id="text-inserting-documents">
<p>
In MongoDB the act of creating data in a collection is called <b>inserting</b>.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 16: </span>Inserting one document</label><pre class="src src-js"><span class="org-keyword">await</span> db.collection(<span class="org-string">'languages'</span>).insertOne({
  name: <span class="org-string">'JavaScript'</span>,
  family: <span class="org-string">'C'</span>,
  year: 1995
});
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 17: </span>Inserting multiple documents</label><pre class="src src-js"><span class="org-keyword">const</span> <span class="org-variable-name">languages</span> = [{
    name: <span class="org-string">'Haskell'</span>,
    family: <span class="org-string">'ML'</span>,
    year: 1990
  }, {
    name: <span class="org-string">'Rust'</span>,
    family: <span class="org-string">'ML'</span>,
    year: 2010,
  }, {
    name: <span class="org-string">'Java'</span>,
    family: <span class="org-string">'C'</span>,
    year: 1995,
  }, {
    name: <span class="org-string">'Common Lisp'</span>,
    family: <span class="org-string">'Lisp'</span>,
    year: 1984,
  }];

<span class="org-keyword">await</span> db.collection(<span class="org-string">'languages'</span>).insertMany(languages)
</pre>
</div>
</div>
</div>

<div id="outline-container-finding-filtering-or-querying-documents" class="outline-4">
<h4 id="finding-filtering-or-querying-documents"><span class="section-number-4">5.2.2</span> Finding (Filtering or Querying) documents</h4>
<div class="outline-text-4" id="text-finding-filtering-or-querying-documents">
<p>
The operations for reading data are called <b>find</b> in the API but are often referred to as filtering or querying as well.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 18: </span>Empty filter returns all documents</label><pre class="src src-js"><span class="org-keyword">const</span> <span class="org-variable-name">cursor</span> = db.collection(<span class="org-string">"languages"</span>).find({});
<span class="org-keyword">const</span> <span class="org-variable-name">results</span> = cursor.toArray();

console.log(results);
</pre>
</div>

<p>
The <code>find</code> operation can potentially return a huge amount of documents depending on the size of your data set so it does not return the results directly, but a <b>cursor</b> pointing to the results. This allows you to either do further processing or return a subset of the results. You can get all of the matching results by calling its <code>toArray()</code> method as in the example above.
</p>

<p>
The simplest filter apart from an empty one is to match on properties exactly. In this example we are picking out allow of the programming languages related to C in our data set.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 19: </span>Filtering with a specific property value</label><pre class="src src-js"><span class="org-keyword">const</span> <span class="org-variable-name">filter</span> = {
  family: <span class="org-string">'C'</span> <span class="org-comment-delimiter">// </span><span class="org-comment">Matching property exactly</span>
}
<span class="org-keyword">const</span> <span class="org-variable-name">results</span> = <span class="org-keyword">await</span> db.collection(<span class="org-string">'languages'</span>).find(filter).toArray();

console.log(results);
</pre>
</div>

<p>
The <code>findOne</code> operation will return the first document it finds which matches the filter.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 20: </span>Finding one document</label><pre class="src src-js"><span class="org-keyword">const</span> <span class="org-variable-name">filter</span> = {
  type: <span class="org-string">'ML'</span>
}

<span class="org-keyword">const</span> <span class="org-variable-name">result</span> = <span class="org-keyword">await</span> db.collection(<span class="org-string">'languages'</span>).findOne(filter);
</pre>
</div>

<p>
For more advanced filtering we use <a href="https://docs.mongodb.com/manual/reference/operator/query/">query operators</a>, you can quickly identify them since they start with a <code>$</code>. Some common ones are <code>$gte</code> (greater-than-or-equal), <code>$lte</code> (less-than-or-equal) and <code>$regex</code> for matching against a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions">regular expression</a>.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 21: </span>Finding all languages with Java in their name</label><pre class="src src-js"><span class="org-keyword">const</span> <span class="org-variable-name">filter</span> = {
  name: { $regex: <span class="org-string">/Java/</span> }
}
<span class="org-keyword">const</span> <span class="org-variable-name">results</span> = <span class="org-keyword">await</span> db.collection(<span class="org-string">'languages'</span>).find(filter).toArray();

console.log(results);
</pre>
</div>

<aside id="orgadde7c8">
<p>
<b>What are regular expressions?</b>
</p>

<p>
Regular expressions (aka <i>regex</i> and <i>regexps</i>) are a way of creating text search patterns. In JavaScript you can create regular expressions in two ways: <code>/pattern/</code> or <code>new RegExp("pattern").</code> Regexes are an invaluable tool and used all over the place so I highly recommend spending some time getting to know the syntax:
</p>

<ul class="org-ul">
<li><a href="https://cheatography.com/davechild/cheat-sheets/regular-expressions/">Regular expression cheatsheet</a></li>
<li><a href="https://regex101.com/">Regular expression test page</a></li>
</ul>
</aside>

<p>
We can also combine multiple operators to express more complex queries; the next example finds all of the languages created in the 90s.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 22: </span>Finding all languages from the 90s</label><pre class="src src-js"><span class="org-keyword">const</span> <span class="org-variable-name">filter</span> = {
  year: {
    $gte: 1990,
    $lte: 1999
  }
};
</pre>
</div>

<p>
You can sort your results with the cursor's <code>sort</code> method by passing it an object containing the property you want to sort on and <code>1</code> for ascending results (low to high) or <code>-1</code> for ascending (high to low).
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 23: </span>All programming languages sorted by year</label><pre class="src src-js"><span class="org-keyword">const</span> <span class="org-variable-name">cursor</span> = <span class="org-keyword">await</span> db.collection(<span class="org-string">'languages'</span>).find({});
<span class="org-keyword">const</span> <span class="org-variable-name">results</span> = cursor.sort({ year: 1 }).toArray();

console.log(results);
</pre>
</div>
</div>
</div>

<div id="outline-container-deleting-documents" class="outline-4">
<h4 id="deleting-documents"><span class="section-number-4">5.2.3</span> Deleting documents</h4>
<div class="outline-text-4" id="text-deleting-documents">
<p>
Deleting documents is very similar to finding documents just replace the <code>find</code> or <code>findOne</code> methods with <code>deleteMany</code> or <code>deleteOne</code>, the methods use the same kind of filters.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 24: </span>Delete Java</label><pre class="src src-js"><span class="org-keyword">await</span> db.collection(<span class="org-string">'languages'</span>).deleteOne({
  name: <span class="org-string">'Java'</span>
});
</pre>
</div>
</div>
</div>

<div id="outline-container-updating-documents" class="outline-4">
<h4 id="updating-documents"><span class="section-number-4">5.2.4</span> Updating documents</h4>
<div class="outline-text-4" id="text-updating-documents">
<p>
Updating can be seen as a combination of a find operation and a write operation. As with the other operations you can either call <code>updateOne</code> or <code>updateMany</code> to update multiple documents at the same time and these methods take two arguments: a filter object to specify which documents will be affected, and an update object defining the modification.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 25: </span>Bringing JavaScript to the 2000s</label><pre class="src src-js"><span class="org-keyword">const</span> <span class="org-variable-name">filter</span> = { name: <span class="org-string">'JavaScript'</span>};
<span class="org-keyword">const</span> <span class="org-variable-name">modification</span> = { $set: { year: 2022 } };

<span class="org-keyword">await</span> db.collection(<span class="org-string">'languages'</span>).updateOne(filter, modification)
</pre>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-javascript-deep-dive" class="outline-2">
<h2 id="javascript-deep-dive"><span class="section-number-2">6</span> JavaScript Deep-Dive</h2>
<div class="outline-text-2" id="text-javascript-deep-dive">
<p>
This section provides a smorgosbord of JavaScript concepts and weirdness. We won't have time to go into all of the nitty gritty details for each topic but rather use them to illustrate more general computing concepts. We will touch upon processes and threads, scope, bindings, functional programming, equality. There's a lot of ground to cover, so let's get started!
</p>
</div>

<div id="outline-container-async-await-and-the-promise-of-a-path-out-of-callback-hell" class="outline-3">
<h3 id="async-await-and-the-promise-of-a-path-out-of-callback-hell"><span class="section-number-3">6.1</span> Async, Await and the Promise of a Path out of Callback Hell</h3>
<div class="outline-text-3" id="text-async-await-and-the-promise-of-a-path-out-of-callback-hell">
<p>
JavaScript is allegedly "asynchronous by default" AND "single-threaded", but what does this actually mean? What is <b>synchronous</b> versus <b>asynchronous</b> execution? In short asynchronous execution allows us to do more work at the same time (concurrently). First let's have a look at how the browser executes JavaScript.
</p>


<figure id="orga3bdcf6">
<img src="./assets/simplified-browser-process.png" alt="simplified-browser-process.png">

<figcaption><span class="figure-number">Figure 5: </span>A very simplified view of how a web browser works</figcaption>
</figure>

<p>
The browser has a main thread which is responsible for not only executing JavaScript but also rendering the HTML and CSS as well as handling user input like clicks and scrolling. If JavaScript allowed for synchronous HTTP requests the whole browser tab would stall while waiting for the response to come back. This is of course something we want to avoid at all costs and thus JavaScript does these sort of I/O operations asynchronously by default for us.
</p>

<aside id="orga0b64bd">
<p>
<b>What is I/O?</b>
</p>

<p>
I/O stands for Input/Output and designates any operations that <i>reaches outside</i> of the main process, such as HTTP requests, reading from files, writing to files etc.
</p>
</aside>

<p>
All asynchronous operations are put on the <b>Event Queue</b> so as to not block the main thread, and from there the operations are executed in other threads. It is important to understand that once a piece of code has gone on the event queue, there's really no way of fully "getting back" to the main thread.
</p>

<p>
Even though the explanation above focused on JavaScript in the browser node.js works in very much the same way with a main thread and an event queue to handle asynchronous requests. It's important to know understand that the node.js process will stay alive for as long as there is something on its event queue.
</p>

<aside id="org23ce081">
<p>
<b>Process vs. threads?</b>
</p>

<p>
You can think of a process as an application running on your computer: VSCode, Chrome, Spotify etc. When you run <code>node index.js</code> to start your server, you are actually starting a new process. Each process runs in isolation and has its own section of memory which other processes cannot see or touch. Threads on the other hand are what are actually executing the instructions in your code. A process can either be single-threaded, meaning that it only uses one thread, or multi-threaded.
</p>

<p>
You can check which processes are currently running in the Task Manager on Windows or in the Activity Monitor on MacOS. On MacOS you can also list them in the terminal by running the command <code>ps aux</code>.
</p>
</aside>
</div>

<div id="outline-container-callback-hell" class="outline-4">
<h4 id="callback-hell"><span class="section-number-4">6.1.1</span> Callback Hell</h4>
<div class="outline-text-4" id="text-callback-hell">
<p>
In the beginning there was the callback.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 26: </span>Collecting all files in a directory using callbacks</label><pre class="src src-js"><span class="linenr"> 1: </span>fs.readdir(directory, (err, files) =&gt; {
<span class="linenr"> 2: </span>  <span class="org-keyword">if</span> (err) {
<span class="linenr"> 3: </span>    console.log(<span class="org-string">'Error finding files: '</span>, err)
<span class="linenr"> 4: </span>  } <span class="org-keyword">else</span> {
<span class="linenr"> 5: </span>    files.forEach((filename) =&gt; {
<span class="linenr"> 6: </span>      <span class="org-keyword">const</span> <span class="org-variable-name">filePath</span> = <span class="org-string">`${directory}/${filename}`</span>;
<span class="linenr"> 7: </span>      fs.stat(filePath, (err, fileStats) =&gt; {
<span class="linenr"> 8: </span>        <span class="org-keyword">if</span> (err) {
<span class="linenr"> 9: </span>          console.log(<span class="org-string">'Error checking file status: '</span>, err)
<span class="linenr">10: </span>        } <span class="org-keyword">else</span> {
<span class="linenr">11: </span>          <span class="org-keyword">if</span> (fileStats.isFile())
<span class="linenr">12: </span>            console.log(<span class="org-string">'Found file:'</span>, filePath);
<span class="linenr">13: </span>          }
<span class="linenr">14: </span>      })
<span class="linenr">15: </span>    })
<span class="linenr">16: </span>  }
<span class="linenr">17: </span>})
</pre>
</div>

<p>
This was the only means of handling asynchronous operations and as you can see from the example above, it quickly lead to unreadable and nested spaghetti code. Adding proper error handling made things worse which meant you would often skip error handling for the sake of readability, leading to code that was broken and error prone. Promises was created to solve this issue and remove the nested spaghetti mess of the code above.
</p>
</div>
</div>

<div id="outline-container-the-promise-of-heaven" class="outline-4">
<h4 id="the-promise-of-heaven"><span class="section-number-4">6.1.2</span> The Promise of Heaven</h4>
<div class="outline-text-4" id="text-the-promise-of-heaven">
<p>
A Promise can be thought of as a <i>promise of a future value</i>, that is, we do not have the value yet, but we capture the promise of it in a variable that we can use in our code. Before we revisit the file listing example above, let's look at the connection between callbacks and promises using <code>setTimeout</code>.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 27: </span>Using setTimeout to delay console.log by a second</label><pre class="src src-js"><span class="linenr">1: </span>console.log(<span class="org-string">'Before setTimeout'</span>)
<span class="linenr">2: </span>
<span class="linenr">3: </span>setTimeout(() =&gt; {
<span class="linenr">4: </span>  console.log(<span class="org-string">'Inside setTimeout'</span>)
<span class="linenr">5: </span>}, 1000);
<span class="linenr">6: </span>
<span class="linenr">7: </span>console.log(<span class="org-string">'After setTimeout'</span>)
</pre>
</div>

<p>
The output of the above example should be:
</p>

<div class="org-src-container">
<pre class="src src-shell">Before setTimeout
After setTimeout
<span class="org-comment-delimiter"># </span><span class="org-comment">After one second:</span>
Inside setTimeout
</pre>
</div>

<p>
The node.js process is kept alive until the callback passed to <code>setTimeout</code> is finished and prints its output. The callback is put on the event queue and hence executed asynchronously. We see that since the last <code>console.log</code> statement in the code, which is executed by the main thread, is printed out before the one in <code>setTimeout</code>.
</p>

<p>
We can turn the <code>setTimeout</code> call into a <code>Promise</code> by using the <code>Promise</code> constructor which takes a callback function with two arguments a <code>resolve</code> function and a <code>reject</code> function. For now we'll only focus on the <code>resolve</code> function which <i>resolves</i> the promise.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 28: </span><code>setTimeout</code> as a <code>Promise</code></label><pre class="src src-js"><span class="linenr"> 1: </span>console.log(<span class="org-string">'Before setTimeout'</span>)
<span class="linenr"> 2: </span>
<span class="linenr"> 3: </span><span class="org-keyword">new</span> <span class="org-type">Promise</span>((resolve, reject) =&gt; {
<span class="linenr"> 4: </span>  setTimeout(() =&gt; {
<span class="linenr"> 5: </span>    console.log(<span class="org-string">'Inside setTimeout'</span>)
<span class="linenr"> 6: </span>    resolve();
<span class="linenr"> 7: </span>  }, 1000);
<span class="linenr"> 8: </span>});
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>console.log(<span class="org-string">'After setTimeout'</span>)
</pre>
</div>

<p>
The output should be the same as in the previous example. But why would we want to wrap an asynchronous call in a <code>Promise</code> like this? Because it allows us to untangle the nested horizontal callback hell pyramid of doom that we saw above. The weapon we have at our disposal is the <code>then</code> method of the promise:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 29: </span>Untangling the file collecting callback hell from before</label><pre class="src src-js"><span class="linenr"> 1: </span><span class="org-comment-delimiter">// </span><span class="org-comment">We wrap our functions in functions that return promises</span>
<span class="linenr"> 2: </span><span class="org-keyword">const</span> <span class="org-variable-name">readdir</span> = (dir) =&gt; {
<span class="linenr"> 3: </span>  <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">Promise</span>((resolve, reject) =&gt; {
<span class="linenr"> 4: </span>    fs.readdir(dir, (err, files) =&gt; {
<span class="linenr"> 5: </span>      <span class="org-keyword">if</span> (err) {
<span class="linenr"> 6: </span>        <span class="org-comment-delimiter">// </span><span class="org-comment">We can handle errors by passing them to the reject callback</span>
<span class="linenr"> 7: </span>        reject(<span class="org-string">'Error finding files: '</span>, err)
<span class="linenr"> 8: </span>      } <span class="org-keyword">else</span> {
<span class="linenr"> 9: </span>        <span class="org-comment-delimiter">// </span><span class="org-comment">and pass on values to the next Promise in the chain by</span>
<span class="linenr">10: </span>        <span class="org-comment-delimiter">// </span><span class="org-comment">using the resolve callback</span>
<span class="linenr">11: </span>        resolve(files);
<span class="linenr">12: </span>      }
<span class="linenr">13: </span>    })
<span class="linenr">14: </span>  })
<span class="linenr">15: </span>}
<span class="linenr">16: </span>
<span class="linenr">17: </span><span class="org-keyword">const</span> <span class="org-variable-name">fileStats</span> = (filePath) =&gt; {
<span class="linenr">18: </span>  <span class="org-keyword">return</span> <span class="org-keyword">new</span> <span class="org-type">Promise</span>((resolve, reject) =&gt; {
<span class="linenr">19: </span>    fs.stat(filePath, (err, fileStats) =&gt; {
<span class="linenr">20: </span>        <span class="org-keyword">if</span> (err) {
<span class="linenr">21: </span>          reject(<span class="org-string">'Error checking file status: '</span>, err)
<span class="linenr">22: </span>        } <span class="org-keyword">else</span> {
<span class="linenr">23: </span>          resolve(fileStats);
<span class="linenr">24: </span>        }
<span class="linenr">25: </span>    })
<span class="linenr">26: </span>  })
<span class="linenr">27: </span>}
<span class="linenr">28: </span>
<span class="linenr">29: </span>readdir(directory)
<span class="linenr">30: </span>  .then((directoryContents) =&gt; {
<span class="linenr">31: </span>    directoryContents.forEach((name) =&gt; {
<span class="linenr">32: </span>      <span class="org-keyword">const</span> <span class="org-variable-name">filePath</span> = <span class="org-string">`${directory}/${name}`</span>;
<span class="linenr">33: </span>
<span class="linenr">34: </span>      fileStats(filePath).then((stats) =&gt; {
<span class="linenr">35: </span>          <span class="org-keyword">if</span> (stats.isFile()) {
<span class="linenr">36: </span>            console.log(<span class="org-string">'Found file:'</span>, filePath);
<span class="linenr">37: </span>          }
<span class="linenr">38: </span>        }).<span class="org-keyword">catch</span>((err) =&gt; {
<span class="linenr">39: </span>          console.log(err);
<span class="linenr">40: </span>        });
<span class="linenr">41: </span>    })
<span class="linenr">42: </span>  }).<span class="org-keyword">catch</span>((err) =&gt; {
<span class="linenr">43: </span>    console.log(err);
<span class="linenr">44: </span>  })
</pre>
</div>

<p>
If we ignore the boilerplate code for creating our promises, the code looks a little bit neater now. It's still nested but we've been able to extract the error handling so it doesn't pollute our core logic as much. We can do better however. The helper function <code>Promise.all</code> will allow us to pass a list of promises and get back the results of all promises in as a list:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 30: </span>Pillar of promises</label><pre class="src src-js">readdir(directory)
  .then((directoryContents) =&gt; directoryContents.map((name) =&gt; <span class="org-string">`${directory}/${name}`</span>))
  .then((filePaths) =&gt; {

    <span class="org-comment-delimiter">// </span><span class="org-comment">Collect all of the stats calls into a list of promises</span>
    <span class="org-keyword">const</span> <span class="org-variable-name">promises</span> = filePaths.map((filePath) =&gt;
      fileStats(filePath).then((stats) =&gt; ({
        filePath,
        isFile: stats.isFile()
      }))
    );

    <span class="org-comment-delimiter">// </span><span class="org-comment">Use Promise.all to make this promise resolve when all promises in the list are resolved.</span>
    <span class="org-keyword">return</span> Promise.all(promises);
  })
  .then((maybeFiles) =&gt; maybeFiles.filter((f) =&gt; f.isFile))
  .then((files) =&gt; files.map((f) =&gt; f.filePath))
  .then((paths) =&gt; console.log(paths))
   <span class="org-comment-delimiter">// </span><span class="org-comment">Now we only need one (1!) catch</span>
  .<span class="org-keyword">catch</span>((err) =&gt; console.log(err))
</pre>
</div>

<p>
Now instead of having a horizontal callback pyramid of doom, we have a pillar of promises. Many of the operations we do in the <code>then</code> clauses are not asynchronous themselves, but once we enter Promiseland there's no escape. You can only use the result of a promise in its <code>then</code> clause, and since <code>then</code> also returns a <code>Promise</code> we can't get out.
</p>

<p>
The main benefit of this approach is that we reduce the nesting and our error handling is significantly simplified. However, we can do better. Enter async/await.
</p>
</div>
</div>

<div id="outline-container-awaiting-salvation" class="outline-4">
<h4 id="awaiting-salvation"><span class="section-number-4">6.1.3</span> Awaiting salvation</h4>
<div class="outline-text-4" id="text-awaiting-salvation">
<p>
The final improvement we can do is to replace our pillar of promises with awaits, but first let's look at the relationship between <code>async</code> functions, <code>await</code> and promises.
</p>

<p>
You can think of <code>await</code> being similar to calling <code>then</code> on a promise, the main difference is that <code>await</code> can only be used in an <code>async</code> context.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 31: </span><code>await</code> in an <code>async</code> context</label><pre class="src src-js"><span class="linenr"> 1: </span><span class="org-comment-delimiter">// </span><span class="org-comment">We can't do this:</span>
<span class="linenr"> 2: </span><span class="org-keyword">await</span> fetch(<span class="org-string">'https://http.cat/500'</span>)
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span><span class="org-keyword">const</span> <span class="org-variable-name">foo</span> = <span class="org-keyword">async</span> () {
<span class="linenr"> 5: </span>  <span class="org-comment-delimiter">// </span><span class="org-comment">This is OK since we're in an async arrow function context</span>
<span class="linenr"> 6: </span>  <span class="org-keyword">await</span> fetch(<span class="org-string">'https://http.cat/200'</span>)
<span class="linenr"> 7: </span>}
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span class="org-keyword">async</span> <span class="org-keyword">function</span> bar() {
<span class="linenr">10: </span>  <span class="org-comment-delimiter">// </span><span class="org-comment">This is OK since we're in an async function context</span>
<span class="linenr">11: </span>  <span class="org-keyword">await</span> fetch(<span class="org-string">'https://http.cat/200'</span>)
<span class="linenr">12: </span>}
</pre>
</div>

<p>
In fact, if you log the <span class="underline">unawaited</span> return value of an <code>async</code> function you will see that it actually returns a <code>Promise</code>:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 32: </span>All <code>async</code> functions return <code>Promise</code>:s</label><pre class="src src-js"><span class="linenr">1: </span><span class="org-keyword">async</span> <span class="org-keyword">function</span> willReturnAPromise() {
<span class="linenr">2: </span>  <span class="org-keyword">return</span> 42
<span class="linenr">3: </span>}
<span class="linenr">4: </span>
<span class="linenr">5: </span>console.log(willReturnAPromise()) <span class="org-comment-delimiter">// </span><span class="org-comment">Prints: Promise { 42 }</span>
</pre>
</div>

<p>
This means that you can <code>await</code> <code>Promise</code>:s and <code>then</code> <code>async</code> functions:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 33: </span>Awaiting promises and then async functions</label><pre class="src src-js"><span class="linenr"> 1: </span><span class="org-keyword">async</span> <span class="org-keyword">function</span> foo() {
<span class="linenr"> 2: </span>  <span class="org-keyword">return</span> 10;
<span class="linenr"> 3: </span>}
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span class="org-keyword">async</span> <span class="org-keyword">function</span> () {
<span class="linenr"> 6: </span>  <span class="org-keyword">const</span> <span class="org-variable-name">ten</span> = <span class="org-keyword">await</span> Promise.resolve(10);
<span class="linenr"> 7: </span>  console.log(ten);
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span>  <span class="org-keyword">await</span> foo().then((result) =&gt; console.log(result + 32));
<span class="linenr">10: </span>}
</pre>
</div>

<p>
Understanding this, we are now equipped to clean-up our file listing example above and make it really appear synchronous.
</p>

<div class="org-src-container">
<pre class="src src-js"><span class="org-keyword">async</span> <span class="org-keyword">function</span> listFilesInDirectory(<span class="org-variable-name">directory</span>) {
  <span class="org-keyword">try</span> {
    <span class="org-keyword">const</span> <span class="org-variable-name">directoryContents</span> = <span class="org-keyword">await</span> readdir(directory);
    <span class="org-keyword">const</span> <span class="org-variable-name">filePaths</span> = directoryContents.map((name) =&gt; <span class="org-string">`${directory}/${name}`</span>);
    <span class="org-keyword">const</span> <span class="org-variable-name">promises</span> = filePaths.map((filePath) =&gt;
      fileStats(filePath).then((stats) =&gt; ({
        filePath,
        isFile: stats.isFile()
      }))
    );
    <span class="org-keyword">const</span> <span class="org-variable-name">maybeFiles</span> = <span class="org-keyword">await</span> Promise.all(promises);
    <span class="org-keyword">const</span> <span class="org-variable-name">files</span> = maybeFiles.filter((f) =&gt; f.isFile);
    <span class="org-keyword">const</span> <span class="org-variable-name">paths</span> = files.map((f) =&gt; f.filePath);
    console.log(paths);
  } <span class="org-keyword">catch</span> (err) {
    console.log(err);
  }
}
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-fun-with-functions" class="outline-3">
<h3 id="fun-with-functions"><span class="section-number-3">6.2</span> Fun with functions</h3>
<div class="outline-text-3" id="text-fun-with-functions">
<p>
This is the section where we dip our toes into functional programming. While JavaScript is object oriented in that almost everything is an object with methods and properties, at its core it's actually very much a functional language where functions are front and center.
</p>

<aside id="orgb0f7c62">
<p>
<b>Functional Programming vs. Object Oriented Programming</b>
</p>

<p>
Functional programming (FP) is influenced by mathematics and especially <a href="https://plato.stanford.edu/entries/lambda-calculus/">Lambda calculus</a>. You don't have to understand Lambda calculus to program in a functional programming style. What developers usually mean when talking about functional programming are these three points:
</p>

<dl class="org-dl">
<dt>Referential transparency</dt><dd>This means that a function must always return the same thing given the same arguments, that is you should always be able to replace the function call with the result of the call.</dd>
<dt>Higher-order functions</dt><dd>Functions take functions as arguments or functions that return functions.</dd>
<dt>Function composition</dt><dd>Creating more complicated behavior by combining functions.</dd>
</dl>

<p>
In practice this means for instance that you avoid using side-effects such as mutations. The reason you want to avoid side-effects and unnecessary mutations is that it can lead to unintended and surprising results which may lead to bugs and your code becoming harder to debug.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 35: </span>Two append functions one of which has the side-effect of updating the original list</label><pre class="src src-js"><span class="linenr"> 1: </span><span class="org-keyword">function</span> <span class="org-function-name">functionalAppend</span>(<span class="org-variable-name">list</span>, <span class="org-variable-name">element</span>) {
<span class="linenr"> 2: </span>  <span class="org-keyword">return</span> [...list, element]
<span class="linenr"> 3: </span>}
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span><span class="org-keyword">function</span> <span class="org-function-name">mutatingAppend</span>(<span class="org-variable-name">list</span>, <span class="org-variable-name">element</span>) {
<span class="linenr"> 6: </span>  list.push(element);
<span class="linenr"> 7: </span>  <span class="org-keyword">return</span> list;
<span class="linenr"> 8: </span>}
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span class="org-keyword">const</span> <span class="org-variable-name">originalList</span> = [1, 2, 3];
<span class="linenr">11: </span>
<span class="linenr">12: </span><span class="org-keyword">let</span> <span class="org-variable-name">result</span> = functionalAppend(originalList, 4);
<span class="linenr">13: </span>
<span class="linenr">14: </span>console.log(result); <span class="org-comment-delimiter">// </span><span class="org-comment">[1, 2, 3, 4]</span>
<span class="linenr">15: </span>console.log(originalList); <span class="org-comment-delimiter">// </span><span class="org-comment">[1, 2, 3]</span>
<span class="linenr">16: </span>
<span class="linenr">17: </span>result = mutatingAppend(originalList, 4);
<span class="linenr">18: </span>
<span class="linenr">19: </span>console.log(result); <span class="org-comment-delimiter">// </span><span class="org-comment">[1, 2, 3, 4]</span>
<span class="linenr">20: </span>console.log(originalList); <span class="org-comment-delimiter">// </span><span class="org-comment">[1, 2, 3, 4] &lt;- !!!!!!!!</span>
</pre>
</div>

<p>
Another consequence of functional programming is that you clearly separate the data and operations on the data.
</p>

<p>
Although most languages can be used in a more or less functional style, there are certain languages that are considered <i>functional</i> like <a href="https://www.haskell.org/">Haskell</a>, <a href="https://elixir-lang.org/">Elixir</a>, <a href="https://clojure.org/">Clojure</a> and <a href="https://elm-lang.org/">Elm</a>.
</p>

<p>
Object oriented programming (OOP) is extremely common and you encounter this style a lot. Below are the four principles of OOP (taken from <a href="https://docs.microsoft.com/en-us/dotnet/csharp/fundamentals/tutorials/oop">Object-oriented programming in C#</a>):
</p>

<dl class="org-dl">
<dt>Abstraction</dt><dd>Modeling the relevant attributes and interactions of entities as classes to define an abstract representation of a system.</dd>
<dt>Encapsulation</dt><dd>Hiding the internal state and functionality of an object and only allowing access through a public set of functions.</dd>
<dt>Inheritance</dt><dd>Ability to create new abstractions based on existing abstractions.</dd>
<dt>Polymorphism</dt><dd>Ability to implement inherited properties or methods in different ways across multiple abstractions.</dd>
</dl>

<p>
The goal of OOP is to create modular and flexible code. Some common languages that more or less strictly follows OOP are <a href="https://www.java.com/en/">Java</a>, <a href="https://en.wikipedia.org/wiki/C_Sharp_(programming_language)">C#</a> and <a href="https://en.wikipedia.org/wiki/Smalltalk">Smalltalk</a>.
</p>

<p>
A common critique of OOP is that it can lead to extremely complex code with an excess of abstraction layers which add very little to in form of functionality. This kind of over-engineering is not specific to OOP though and can also be seen in code-bases following a functional programming approach. The tendency to rely on mutation does however often lead to code that is hard to debug.
</p>

<p>
If the topic of programming languages interests you I can't recommend <a href="https://www.coursera.org/learn/programming-languages">Dan Grossman's course on programming languages</a> enough. It is by far the best programming course I have ever taken and will give you a thorough understanding of different programming paradigms.
</p>
</aside>

<p>
We are going to have a look at the power of functional programming by implementing some of the JavaScript array methods ourselves, namely <code>[].map()</code>, <code>[].filter()</code> and <code>[].reduce()</code>.
</p>
</div>


<div id="outline-container-implementing-our-own-map" class="outline-4">
<h4 id="implementing-our-own-map"><span class="section-number-4">6.2.1</span> Implementing our own <code>map</code></h4>
<div class="outline-text-4" id="text-implementing-our-own-map">
<p>
A mapping function takes an operation and a list and returns a list where the operation has been applied to each element.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 36: </span>Our own <code>map</code> function</label><pre class="src src-js"><span class="linenr">1: </span><span class="org-keyword">const</span> <span class="org-variable-name">map</span> = (operation, list) =&gt; {
<span class="linenr">2: </span>  <span class="org-keyword">let</span> <span class="org-variable-name">results</span> = [];
<span class="linenr">3: </span>
<span class="linenr">4: </span>  <span class="org-keyword">for</span> (element of list) {
<span class="linenr">5: </span>    results.push(operation(element));
<span class="linenr">6: </span>  }
<span class="linenr">7: </span>
<span class="linenr">8: </span>  <span class="org-keyword">return</span> results;
<span class="linenr">9: </span>};
</pre>
</div>
<p>
Since we will apply an operation to each element in the list we need our operations to take only 1 argument. We can do that by turning a multi-argument function into a so-called <i>higher-order function</i> that only take one argument and returns a function which takes the next argument. This is called <a href="https://javascript.info/currying-partials">currying</a>.
</p>

<div class="org-src-container">
<pre class="src src-js"><span class="linenr"> 1: </span><span class="org-keyword">function</span> <span class="org-function-name">add</span>(<span class="org-variable-name">x</span>) {
<span class="linenr"> 2: </span>  <span class="org-keyword">return</span> <span class="org-keyword">function</span> (<span class="org-variable-name">y</span>) {
<span class="linenr"> 3: </span>    <span class="org-keyword">return</span> x * y;
<span class="linenr"> 4: </span>  };
<span class="linenr"> 5: </span>}
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span><span class="org-comment-delimiter">// </span><span class="org-comment">The above can be shortened to this using arrow functions:</span>
<span class="linenr"> 8: </span><span class="org-keyword">const</span> <span class="org-variable-name">subtract</span> = (x) =&gt; (y) =&gt; x - y;
<span class="linenr"> 9: </span>
<span class="linenr">10: </span><span class="org-comment-delimiter">// </span><span class="org-comment">Now we can "configure" our operation according to our needs. Let's</span>
<span class="linenr">11: </span><span class="org-comment-delimiter">// </span><span class="org-comment">create an operation that takes 1 argument and adds 5 to it:</span>
<span class="linenr">12: </span><span class="org-keyword">const</span> <span class="org-variable-name">addFive</span> = add(5);
</pre>
</div>

<p>
The <code>addFive</code> function is a function that takes one number as its argument and adds 5 to it, so we can readily pass it to our <code>map</code> function:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 38: </span>Using <code>addFive</code> in our <code>map</code> function</label><pre class="src src-js"><span class="org-keyword">const</span> <span class="org-variable-name">result</span> = map(addFive, [1, 2, 3, 4]);
console.log(result) <span class="org-comment-delimiter">// </span><span class="org-comment">[6, 7, 8, 9]</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-implementing-our-own-filter" class="outline-4">
<h4 id="implementing-our-own-filter"><span class="section-number-4">6.2.2</span> Implementing our own <code>filter</code></h4>
<div class="outline-text-4" id="text-implementing-our-own-filter">
<p>
A filter function takes a function and a list. The function passed to filter should return either <code>true</code> or <code>false</code> when given an element of the list and <code>filter</code> will return a list of all elements for which the function returned <code>true</code>. This kind of function is usually called a <b>predicate</b>.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 39: </span>Our filter function</label><pre class="src src-js"><span class="linenr"> 1: </span><span class="org-keyword">const</span> <span class="org-variable-name">filter</span> = (predicate, list) =&gt; {
<span class="linenr"> 2: </span>  <span class="org-keyword">let</span> <span class="org-variable-name">results</span> = [];
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span>  <span class="org-keyword">for</span> (element of list) {
<span class="linenr"> 5: </span>    <span class="org-keyword">if</span> (predicate(element)) {
<span class="linenr"> 6: </span>      results.push(element);
<span class="linenr"> 7: </span>    }
<span class="linenr"> 8: </span>  }
<span class="linenr"> 9: </span>
<span class="linenr">10: </span>  <span class="org-keyword">return</span> results;
<span class="linenr">11: </span>};
<span class="linenr">12: </span>
<span class="linenr">13: </span><span class="org-comment-delimiter">// </span><span class="org-comment">Our predicate function which returns true if the passed in value is even</span>
<span class="linenr">14: </span><span class="org-keyword">const</span> <span class="org-variable-name">isEven</span> = (x) =&gt; x % 2 == 0;
<span class="linenr">15: </span>
<span class="linenr">16: </span><span class="org-keyword">const</span> <span class="org-variable-name">result</span> = filter(isEven, [1, 2, 3, 4]);
<span class="linenr">17: </span>console.log(result) <span class="org-comment-delimiter">// </span><span class="org-comment">[2, 4]</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-implementing-our-own-reducelist" class="outline-4">
<h4 id="implementing-our-own-reducelist"><span class="section-number-4">6.2.3</span> Implementing our own <code>reduceList</code></h4>
<div class="outline-text-4" id="text-implementing-our-own-reducelist">
<p>
You might have noticed that there are some code duplication between applyToElements and keepIf. Let's try and generalize what we are doing and extract the common bits into another function: <code>reduceList</code>:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 40: </span><code>reduceList</code></label><pre class="src src-js"><span class="linenr"> 1: </span><span class="org-keyword">const</span> <span class="org-variable-name">reduceList</span> = (operation, list) =&gt; {
<span class="linenr"> 2: </span>  <span class="org-keyword">let</span> <span class="org-variable-name">results</span> = [];
<span class="linenr"> 3: </span>
<span class="linenr"> 4: </span>  <span class="org-keyword">for</span> (element of list) {
<span class="linenr"> 5: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">Since we don't know what the operation will do to the</span>
<span class="linenr"> 6: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">accumulated results list (append or not append), we need</span>
<span class="linenr"> 7: </span>    <span class="org-comment-delimiter">// </span><span class="org-comment">to be able to pass it to the operation function:</span>
<span class="linenr"> 8: </span>    results = operation(results, element);
<span class="linenr"> 9: </span>  }
<span class="linenr">10: </span>
<span class="linenr">11: </span>  <span class="org-keyword">return</span> results;
<span class="linenr">12: </span>};
</pre>
</div>

<p>
<code>reduceList</code> is able to handle both mapping and filtering at the expense of the operation functions becoming more specific in that they need to update the results list.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 41: </span>Re-implementing <code>map</code> and <code>filter</code> using <code>reduceList</code></label><pre class="src src-js"><span class="linenr"> 1: </span><span class="org-keyword">let</span> <span class="org-variable-name">result</span> = reduceList((results, x) =&gt; {
<span class="linenr"> 2: </span>  <span class="org-keyword">return</span> [...results, addFive(x)];
<span class="linenr"> 3: </span>}, [1, 2, 3, 4]);
<span class="linenr"> 4: </span>
<span class="linenr"> 5: </span>console.log(result); <span class="org-comment-delimiter">// </span><span class="org-comment">[6, 7, 8, 9]</span>
<span class="linenr"> 6: </span>
<span class="linenr"> 7: </span>result = reduceList((results, x) =&gt; {
<span class="linenr"> 8: </span>  <span class="org-keyword">if</span> (isEven(x)) {
<span class="linenr"> 9: </span>    <span class="org-keyword">return</span> [...results, x];
<span class="linenr">10: </span>  }
<span class="linenr">11: </span>
<span class="linenr">12: </span>  <span class="org-keyword">return</span> results;
<span class="linenr">13: </span>}, [1, 2, 3, 4]);
<span class="linenr">14: </span>
<span class="linenr">15: </span>console.log(result); <span class="org-comment-delimiter">// </span><span class="org-comment">[2, 4]</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-implementing-our-own-reduce" class="outline-4">
<h4 id="implementing-our-own-reduce"><span class="section-number-4">6.2.4</span> Implementing our own <code>reduce</code></h4>
<div class="outline-text-4" id="text-implementing-our-own-reduce">
<p>
We can go further though; by allowing the caller to pass in the accumulator (results) we can actually handle even more use-cases.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 42: </span>Our <code>reduce</code> function</label><pre class="src src-js"><span class="linenr">1: </span><span class="org-keyword">const</span> <span class="org-variable-name">reduce</span> = (operation, list, accumulator) =&gt; {
<span class="linenr">2: </span>  <span class="org-keyword">for</span> (element of list) {
<span class="linenr">3: </span>    accumulator = operation(accumulator, element);
<span class="linenr">4: </span>  }
<span class="linenr">5: </span>
<span class="linenr">6: </span>  <span class="org-keyword">return</span> accumulator;
<span class="linenr">7: </span>};
</pre>
</div>

<p>
We can use <code>reduce</code> to not only work with lists, but we can actually use it do calculations as well if we pass in a number as the accumulator.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 43: </span>Using <code>reduce</code> to add a list of numbers together</label><pre class="src src-js"><span class="linenr">1: </span><span class="org-keyword">const</span> <span class="org-variable-name">result</span> = reduce((sum, x) =&gt; sum + x, [1, 2, 3, 4], 0);
<span class="linenr">2: </span>
<span class="linenr">3: </span>console.log(result); <span class="org-comment-delimiter">// </span><span class="org-comment">10</span>
</pre>
</div>

<p>
Passing an object as the accumulator allows us to create more complex aggregations from for instance a list of objects. The name <code>reduce</code> might start to make sense now, we are taking a list of something and <i>reducing</i> it to a value of some sort.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 44: </span>Using <code>reduce</code> to produce a count of dog breeds</label><pre class="src src-js"><span class="linenr"> 1: </span><span class="org-comment-delimiter">// </span><span class="org-comment">Or build an object from a list</span>
<span class="linenr"> 2: </span><span class="org-keyword">const</span> <span class="org-variable-name">dogs</span> = [
<span class="linenr"> 3: </span>  { name: <span class="org-string">"Fido"</span>, breed: <span class="org-string">"Chihuahua"</span> },
<span class="linenr"> 4: </span>  { name: <span class="org-string">"Woofmeister"</span>, breed: <span class="org-string">"Poodle"</span> },
<span class="linenr"> 5: </span>  { name: <span class="org-string">"Puglifer"</span>, breed: <span class="org-string">"Pug"</span> },
<span class="linenr"> 6: </span>  { name: <span class="org-string">"Poddle McPoodleface"</span>, breed: <span class="org-string">"Poodle"</span> },
<span class="linenr"> 7: </span>];
<span class="linenr"> 8: </span>
<span class="linenr"> 9: </span><span class="org-keyword">const</span> <span class="org-variable-name">result</span> = reduce((accumulator, dog) =&gt; ({
<span class="linenr">10: </span>  ...accumulator,
<span class="linenr">11: </span>  [dog.breed]: (accumulator[dog.breed] || 0) + 1,
<span class="linenr">12: </span>}), dogs, {});
<span class="linenr">13: </span>
<span class="linenr">14: </span>console.log(result) <span class="org-comment-delimiter">// </span><span class="org-comment">{ 'Chihuahua': 1, 'Pug': 1, 'Poodle': 2 }</span>
</pre>
</div>

<p>
Now we have implemented almost a full version of the JavaScript reduce array method [].reduce. I hope this illustrates the power of the concept of higher-order functions. Higher-order functions together with referential transparency (the fact that a function should always return the same result when passed the same arguments) are at the heart of functional programming and grasping the potential of them allows for very powerful abstractions.
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-further-into-apis" class="outline-2">
<h2 id="further-into-apis"><span class="section-number-2">7</span> Further into APIs</h2>
<div class="outline-text-2" id="text-further-into-apis">
<p>
For this section we will work on <a href="./examples/04c-woofwoof-api">the WoofWoof API</a> we developed in class and use it to illustrate various API-related topics such as REST, middlewares, query parameters and CORS. We begin by looking at what endpoints we have thus far:
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">HTTP Method</th>
<th scope="col" class="org-left">Endpoint</th>
<th scope="col" class="org-left">Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">POST</td>
<td class="org-left"><code>/dogs</code></td>
<td class="org-left">Add a dog</td>
</tr>

<tr>
<td class="org-left">GET</td>
<td class="org-left"><code>/dogs</code></td>
<td class="org-left">Retrieve all dogs</td>
</tr>

<tr>
<td class="org-left">GET</td>
<td class="org-left"><code>/dogs/:id</code></td>
<td class="org-left">Retrieve a specific dog</td>
</tr>

<tr>
<td class="org-left">PATCH</td>
<td class="org-left"><code>/dogs/:id</code></td>
<td class="org-left">Update a specific dog</td>
</tr>

<tr>
<td class="org-left">DELETE</td>
<td class="org-left"><code>/dogs/:id</code></td>
<td class="org-left">Delete a specific dog</td>
</tr>
</tbody>
</table>

<p>
We have route handlers for adding dogs, getting all dogs or a specific dogs, we can also update a dog entry or delete it. In fact, this API is a good example of a simple REST API.
</p>
</div>

<div id="outline-container-what-is-a-rest-api" class="outline-3">
<h3 id="what-is-a-rest-api"><span class="section-number-3">7.1</span> What is a REST API?</h3>
<div class="outline-text-3" id="text-what-is-a-rest-api">
<p>
REST stands for <i>Representational State Transfer</i> and is a convention for how to write an HTTP API. One of the most important aspect of a REST API is that it has a <b>common interface</b> regardless of the type of data resource it is exposing. A REST API is also meant to be <b>client (<i>frontend</i>) agnostic</b> and able to support different clients and use-cases at once. Another important aspect is that a REST API needs to be <b>stateless</b>, which means that the server should not hold any client-specific state and that everything needed to fulfill a query must be provided in the request (given the same input we should get identical output). REST APIs make sense when fronting a database where we have one or more collections of things and need to add, find, update and/or delete entries (see the section on MongoDB).
</p>

<p>
The interface of our WoofWoof API is an example of a typical REST API: you operate on the whole <code>dogs</code> collection using the <code>/dogs</code> endpoint and we use different HTTP methods (or verbs) to either retrieve dogs (<code>GET</code>) or add a dog to the collection (<code>POST</code>). If we want to do something to a specific dog entry we append its ID: <code>/dogs/:dogId</code>, and use HTTP methods to specify the action: retrieve (<code>GET</code>), update (<code>PATCH</code>) and delete (<code>DELETE</code>).
</p>

<p>
So what are the benefits of using a REST API? First of all, having a uniform interface to an API greatly simplifies integrating it to frontends or other APIs. If your API is a unique snowflake it will most likely require more work for the people using your API. Another benefit is the ability to cache responses since all information required is provided by the request.
</p>
</div>
</div>
</div>

<div id="outline-container-how-to-structure-your-project" class="outline-2">
<h2 id="how-to-structure-your-project"><span class="section-number-2">8</span> How to Structure your Project</h2>
<div class="outline-text-2" id="text-how-to-structure-your-project">
<p>
For the brief you are to write an HTTP API and some front-end client which uses your API. There are a few ways to go about doing this and in this section I am going to list some common approaches.
</p>

<p>
First, it helps if you consider your API and your client as completely separate services, imagine that you are two teams: one working on the front-end and one on the back-end.
</p>
</div>

<div id="outline-container-how-many-repos" class="outline-3">
<h3 id="how-many-repos"><span class="section-number-3">8.1</span> How many Repos?</h3>
<div class="outline-text-3" id="text-how-many-repos">
<p>
The first question you might face is one git repository or two repositories? What do I mean by this? In the single repository case you have both the back-end API and the front-end client in the same directory as in the listing below.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 45: </span>Single repository project</label><pre class="src src-shell">my-service
&#9500;&#9472;&#9472; .git
&#9500;&#9472;&#9472; client
&#9474;&#160;&#160; &#9500;&#9472;&#9472; node_modules
&#9474;&#160;&#160; &#9500;&#9472;&#9472; src
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9492;&#9472;&#9472; index.js
&#9474;&#160;&#160; &#9500;&#9472;&#9472; package-lock.json
&#9474;&#160;&#160; &#9492;&#9472;&#9472; package.json
&#9500;&#9472;&#9472; server
&#9474;&#160;&#160; &#9500;&#9472;&#9472; node_modules
&#9474;&#160;&#160; &#9500;&#9472;&#9472; src
&#9474;&#160;&#160; &#9474;&#160;&#160; &#9492;&#9472;&#9472; index.js
&#9474;&#160;&#160; &#9500;&#9472;&#9472; package-lock.json
&#9474;&#160;&#160; &#9492;&#9472;&#9472; package.json
&#9492;&#9472;&#9472; README.md
</pre>
</div>

<p>
The benefit of single repository is that it's very easy to make correlated changes to the client and the server at the same time and in the same commit. This ensures that the current client and the current server are compatible, if you make sure to update both at the same time that is. This practice is also referred to as a mono-repo and its an approach that companies such as Google use and from what I have heard over 90% of their code resides in a giant mono-repo.
</p>

<p>
So what are the drawbacks of a mono-repo? Mainly it becomes a bit more complicated to deploy your application since you will need to support multiple means of deployment within the same repository. For instance Netlify or Vercel for the client and Heroku or Digital Ocean for the server. You need to make sure to restrict your deployments to sub-folders of your repository. There's also a question of how flexible you can be with regards to deployments: will you be forced to use separate branches for deployment or will you be able to use git tags.
</p>

<p>
Another drawback of having a mono-repo is that git was not meant to handle huge code bases, so if your service would scale to the size of Google you will have to implement workarounds and/or even modify git to allow your team to work efficiently. You most likely will not reach that stage during this course.
</p>

<p>
The other common pattern is to split everything up into separate git repositories, one for your client and one for your server. This makes it easier to treat them as separate services and can simplify the deployment process. You will be able to chose the most appropriate production deployment procedure for each service. However, there is a bit of overhead that comes from handling multiple git repositories and their respective configurations etc.
</p>

<p>
The multi-repository approach has been dominant for the last five years or so in my experience, but lately there has been a hype around mono-repos, so it might be that this will become more dominant in the future. In summary, both approaches are widely used so you can't really go wrong here.
</p>
</div>
</div>

<div id="outline-container-what-should-i-use-for-the-client" class="outline-3">
<h3 id="what-should-i-use-for-the-client"><span class="section-number-3">8.2</span> What should I use for the client?</h3>
<div class="outline-text-3" id="text-what-should-i-use-for-the-client">
<p>
Here there are SO many options that it's almost a joke. The most common tools for writing front-ends in the industry currently though is by far React, followed by Vue and then Angular. While I do love using vanilla JavaScript, when making a more complex web page there are just so many benefits to using a framework like React, if you learn the basics you will be able to focus more on implementing the functionality than trying to figure out how to implement the functionality since you need to reinvent the wheel at every turn. <a href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks">MDN's page on JavaScript frameworks</a> gives a good overview of some common ones and what they bring to the table.
</p>

<p>
I recommend you use the framework you are most comfortable with. If you don't know any framework, I recommend you use this opportunity to get yourself acquainted with one. If you are not sure which one to choose go with React because it is basically an industry standard at the time of writing (2022).
</p>
</div>

<div id="outline-container-but-i-want-to-be-adventurous" class="outline-4">
<h4 id="but-i-want-to-be-adventurous"><span class="section-number-4">8.2.1</span> But I want to be adventurous!!</h4>
<div class="outline-text-4" id="text-but-i-want-to-be-adventurous">
<p>
If you feel that the mainstream JavaScript frameworks are boring and not for you, then you've come to the right place. There are so many other interesting and fascinating ways to build front-ends that do not follow down the much trodden path. Maybe the frameworks listed here are not for this project right now, but they might provide a source of inspiration later on your journey as a developer. The list here focuses on frameworks that choose to do things differently and some of them are not even in JavaScript (though they do transpile down to JavaScript in most cases). I do recommend you at one point give yourself the opportunity to try some of these out, not only because it's a lot of fun, but also because they challenge the conventional way of doing things and provide a great learning experience.
</p>

<dl class="org-dl">
<dt><a href="https://elm-lang.org/">Elm</a></dt><dd>You think TypeScript does not provide you the amount of type-checking you need for your project? Say hi to Elm, a <a href="https://www.haskell.org/">Haskell</a>-inspired purely functional programming language made for the sole purpose of building web apps. The on-boarding experience is great and the error messages are AMAZING.</dd>
<dt><a href="https://clojurescript.org/">ClojureScript</a></dt><dd>ClojureScript (as well as its parent language <a href="https://clojure.org/">Clojure</a>) is a LISP which is a family of languages that has a few common traits: very simple syntax, lots of parentheses and the treatment of code as data. LISPs are really great for writing code that writes code. However, this is not the only thing ClojureScript does well, it is tailored towards functional programming with immutability at the center and interesting ways of handling concurrency. Getting used to LISPs is a real mind-bender and will really help broaden your horizons as a developer.</dd>
<dt><a href="https://www.purescript.org/">PureScript</a></dt><dd>You tried Elm and felt it did a bit too much hand-holding? Then PureScript is for you. It's even more inspired by Haskell and comes with full support for esoteric features such as type classes, higher kinded types and higher rank polymorphism (not sure what the last one means, but sounds awesome). Prepare yourself for a steep learning curve, but you will most likely find yourself at the cusp of modern programming language theory after getting proficient in this language.</dd>
<dt><a href="https://cycle.js.org/">Cycle.js</a></dt><dd>What if instead of writing a web app that allows for human interactions, you flipped the whole premise on its head and instead put the stream of interactions at the center of your web app? Cycle.js is built around the concept of reactive streams. Everything are streams of events which you use to render you application and add interactivity. In the beginning it feels extremely backwards, but once you "get it" it starts to feel like a really natural way of thinking about apps and services.</dd>
<dt><a href="https://yew.rs/">Yew</a></dt><dd>Ready to tick off two buzzwords with a single framework? With Yew you write your code in <a href="https://www.rust-lang.org/">Rust</a> and it compiles down to <a href="https://webassembly.org/">WebAssembly</a>, the new web language on the block. Even though you write your page in Rust, the overall experience is similar to React and Elm.</dd>
<dt><a href="https://reasonml.github.io/">Reason ML</a></dt><dd>From what I heard the draft for this project was what lead to the development of React at Facebook. It is very similar to Elm, but uses a language called <a href="https://ocaml.org/">OCaml</a> as its foundation.</dd>
</dl>
</div>
</div>
</div>
</div>

<div id="outline-container-resources-and-useful-links" class="outline-2">
<h2 id="resources-and-useful-links"><span class="section-number-2">9</span> Resources and useful links</h2>
<div class="outline-text-2" id="text-resources-and-useful-links">
<p>
<b>General</b>
</p>
<ul class="org-ul">
<li><a href="https://github.com/iensu/data-interaction-course-materials">Course GitHub repository with code examples and exercises</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/Performance/How_browsers_work">How browsers work</a></li>
<li><a href="https://restfulapi.net/">What is a REST API?</a></li>
</ul>

<p>
<b>Express</b>
</p>
<ul class="org-ul">
<li><a href="https://zellwk.com/blog/async-await-express">Async/Await in Express</a></li>
</ul>

<p>
<b>MongoDB</b>
</p>
<ul class="org-ul">
<li><a href="https://docs.mongodb.com/manual/crud/">MongoDB CRUD operations</a></li>
<li><a href="https://docs.mongodb.com/drivers/node/current/fundamentals/crud/">MongoDB JavaScript Driver CRUD operations</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Jens Östlund, Fabian Miiro</p>
</div>
</body>
</html>
